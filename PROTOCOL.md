# Client-Server Protocol

## Notes
- Each instance of an action has a unique nonce - generated by the party initiating the action - associated with it to link responses to it 

## Actions
### Setting name
- client sends `{action: “setName”, name: “Shazz”}`
- ~~server sends `{type: "response", success: true}` **OR** `{type: "response", success: false, error: "Name can't be empty."}`~~

### Hosting a new meeting
- client sends `{type: "action", action: “createMeeting”}`
- server sends `{type: "response", success: true, code: 1234}`

### Joining a meeting
- client sends `{type: "action", action: “joinMeeting”, code: 1234}`
- server sends `{type: "response", success: true, name: “Keith”}` **OR** `{type: "response", success: false, error: "No such meeting."}`
- |
- server sends to client's meeting's host `{type: "action", action: "newMember", id: 1, name: "Shazz"}`
- ~~client's meeting's host sends `{type: "response", success: true}`~~

### Submitting an estimate
- client sends `{type: "action", action: "estimate", estimate: 3}`
- ~~server sends `{type: "response", success: true}` **OR** `{type: "response", success: false, error: "That's not a possible estimate."}`~~
- |
- server sends to client's meeting's host `{type: "action", action: "estimate", id: 1, estimate: 3}`
- ~~client's meeting's host sends `{type: "response", success: true}`~~

### New round
- client sends `{type: "action", action: "newRound"}`
- |
- server sends to all clients in host's meeting `{type: "action", action: "newRound"}`